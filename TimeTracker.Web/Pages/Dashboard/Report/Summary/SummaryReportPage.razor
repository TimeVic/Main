@page "/dashboard/report/summary"

@using TimeTracker.Web.Pages.Dashboard.Shared
@using TimeTracker.Web.Pages.Dashboard.Report.Summary.Parts

@inherits BaseComponent
@layout Layout

<RadzenCard>
    <FilterForm/>
</RadzenCard>

<RadzenCard class="mt-2">

    @if (_state.Value.IsLoading)
    {
        <RadzenProgressBar 
            Value="100"
            ShowValue="false" 
            ProgressBarStyle="ProgressBarStyle.Info"
            Mode="ProgressBarMode.Indeterminate"/>
    }
    else
    {
        <RadzenChart>
            <RadzenColumnSeries 
                Data="@_byDateItems" 
                CategoryProperty="Date"
                LineType="LineType.Dashed"
                ValueProperty="DurationAsMillis"
                Title="By Date"
            >
                <RadzenSeriesDataLabels Visible="false" />
            </RadzenColumnSeries>
            <RadzenColumnOptions Radius="5" />
            <RadzenValueAxis Min="0" Step="86400000" Formatter="FormatterDuration">
                <RadzenGridLines Visible="true" />
            </RadzenValueAxis>
            <RadzenLegend Visible="false" />
        </RadzenChart>    
    }
</RadzenCard>

<RadzenCard class="mt-2">
    @if (_state.Value.IsLoading)
    {
        <RadzenProgressBar 
            Value="100"
            ShowValue="false" 
            ProgressBarStyle="ProgressBarStyle.Info"
            Mode="ProgressBarMode.Indeterminate"/>
    }
    else if (_state.Value.SummaryReportData?.GroupedByDay != null)
    {
        <ByDateTable Items="@_state.Value.SummaryReportData.GroupedByDay"></ByDateTable>
    }
    else if (_state.Value.SummaryReportData?.GroupedByClient != null)
    {
        <ByClientTable Items="@_state.Value.SummaryReportData.GroupedByClient"></ByClientTable>
    }
    else if (_state.Value.SummaryReportData?.GroupedByProject != null)
    {
        <ByProjectTable Items="@_state.Value.SummaryReportData.GroupedByProject"></ByProjectTable>
    }
    else if (_state.Value.SummaryReportData?.GroupedByMonth != null)
    {
        <ByMonthTable Items="@_state.Value.SummaryReportData.GroupedByMonth"></ByMonthTable>
    }
    else if (_state.Value.SummaryReportData?.GroupedByUser != null)
    {
        <ByUserTable Items="@_state.Value.SummaryReportData.GroupedByUser"></ByUserTable>
    }
</RadzenCard>
